---
lab:
  title: 'ラボ 3: メジャーを作成する'
---

# ラボ 3: メジャーを作成する

このラボでは、以下の方法について説明します。
- ビジネスの業績と健全性を追跡するためのビジネス メジャーを定義する
- 顧客メジャーを定義して、個々の顧客に関する分析情報を得る

## 演習 1: メジャーと属性を定義する
### タスク 1: 店舗内購入の平均値
この最初のタスクでは、**Contoso Coffee** で行われたすべての店舗内購入の平均値を定義するメジャーを作成します。

1. **[分析情報]** を展開し、左側のナビゲーション メニューから **[メジャー]** を選択します。

1. ツール バーから **[ + 新規]** を選択し、**[独自のビルド**] を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. **名前**を **Average Store Purchase Value ($)** に設定し、**[完了]** を選択します。

1. **顧客**から**ビジネス**に**メジャーの種類**を切り替えます。

1. **計算 1** の横にある **[編集名]** を選択します。

1. **名前**を **Average Store Purchase Value ($)** に設定します。

1. **Output 属性名**が **AverageStorePurchaseValue** に設定されていることを確認します。

1. **完了** を選択します。

1. **Average Store Purchase Value ($)** の計算で、**[関数を選択する]** ドロップダウンから **[平均]** を選択します。

1. **[+ 属性の追加]** を選択し、**Purchases : PoS** を展開して、**[TotalPrice]** を選択します。

1. **[追加]** を選択します。

1. **[実行]** ボタンを選択してメジャーを完了します。

この次のタスクでは、**Contoso Coffee** で行われたすべての Web 購入の平均値を定義するメジャーを作成します。

1. 左側のナビゲーション メニューから **[分析情報]、[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. **名前**を **Average Web Purchase Value ($)** に設定し、**[完了]** を選択します。

1. **顧客**から**ビジネス**に**メジャーの種類**を切り替えます。

1. **計算 1** の横にある **[編集名]** を選択します。

1. **名前**を **Average Web Purchase Value ($)** に設定します。

1. **Output 属性名**が **AverageWebPurchaseValue** に設定されていることを確認します。

1. **完了** を選択します。

1. **Average Web Purchase Value ($)** の計算で、**[関数を選択する]** ドロップダウンから **[平均]** を選択します。

1. **[+ 属性の追加]** を選択し、**Purchases: eCommerce** を展開して、**[TotalPrice]** を選択します。

1. **[追加]** を選択します。

1. **[実行]** ボタンを選択してメジャーを完了します。

### タスク 2: 顧客メジャーを定義する
顧客属性の計算に使用できる 2 つの顧客メジャーが必要です。 1 つのメジャーを作成して、**オンライン購入**に対する顧客の合計支出を決定し、1 つのメジャーを作成して、**店舗内購入**に対する合計支出を決定します。 これらを作成したら、顧客属性を作成して、これら 2 つをまとめて追加できます。

このタスクでは、店舗内で行われたすべての購入の合計を定義するメジャーを作成します。

1. 左側のナビゲーション メニューから **[分析情報]、[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. **名前**を **Total In Store Spend** に設定し、**[完了]** を選択します。

1. **Total In Store Spend** の計算の下で、**[関数を選択する]** ドロップダウンから **[合計]** を選択します。

1. **[+ 属性の追加]** を選択し、**Purchases : PoS** を展開し、**[TotalPrice]** を選択して、**[追加]** を選択します。

1. メジャーの計算を設定するには、**[ディメンション (1)]** を選択します。

1. **[ディメンションの編集]** を選択します。

1. **Purchases : PoS** を展開し、**[LoyaltyId]** を選択し、**[完了]** を選択します。

1. **適用**を選択します。

1. **[実行]** ボタンを選択してメジャーを完了します。 エラーが発生し、**リレーションシップ パス**を選択する必要がある場合は、**[PoS_Purchases]、[Customer]** を選択し、**[実行]** ボタンを選択して完了します。

次に、オンラインで行われたすべての購入の合計を定義するメジャーを作成します。

1. 左側のナビゲーション メニューから **[分析情報]、[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. **名前**を **Total Online Spend** に設定し、**[完了]** を選択します。

1. **Total Online Spend** の計算で、**[関数を選択する]** ドロップダウンから **[合計]** を選択します。

1. **[+ 属性の追加]** を選択し、**Purchases: eCommerce** を展開し、**[TotalPrice]** を選択して **[追加]** をクリックします。

1. **[メジャーの計算を設定]** で、**[ディメンション (1)]** を選択します。

1. **[ディメンションの編集]** を選択します。

1. **[Purchases: eCommerce]** を展開し、**[ContactId]** を選択し、**[完了]** を選択します。

1. **適用**を選択します。

1. **[実行]** ボタンを選択してメジャーを完了します。

### タスク 3: 顧客属性を定義する 
まず、各顧客が獲得する**合計ロイヤルティ ポイント**を定義します。

1. 必要に応じて、左側のナビゲーション メニューから **[分析情報]、[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. **名前**を **Total Club Points** に設定し、**[完了]** を選択します。

1. **クラブの合計ポイント**の計算の下で、**[関数の型]** ドロップダウンから **[合計]** を選択します。

1. **[+ 属性の追加]** を選択し、**[Purchases : PoS]** を展開し、**[RewardPointsAdded]** を選択して、**[追加]** を選択します。

1. **[実行]** ボタンを選択してメジャーを完了します。

次に、各顧客に対して行われたすべての購入の合計値を定義します。

1. 左側のナビゲーション メニューから **[分析情報]、[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. **名前**を **Lifetime Spend ($)** に設定し、**[完了]** を選択します。

1. **Lifetime Spend ($)** の計算で、**[関数の型]** ドロップダウンから **[合計]** を選択します。

1. **[+ 属性の追加]** を選択します。

1. **[メジャー]** タブを選択し、**[TotalInStoreSpend: CustomerInsights]** 展開し、**[計算 1]** を選択して、**[追加]** を選択します。

1. **[+ (プラス記号)]** を選択して、追加した属性の後にプラス記号を追加します。 プラス符号が計算式に表示されます。

1. **[+ 属性の追加]** を選択します。

1. [**[メジャー]** タブを選択し、**TotalOnlineSpend : CustomerInsights** を展開し、**[計算 1]** を選択して、**[追加]** を選択します。

1. 完成したメジャー次の図のようになります。

1. **[実行]** ボタンを選択してメジャーを完了します。

次に、各顧客に対して行われたすべての店舗購入の平均値を定義します。

1. 左側のナビゲーション メニューから **[分析情報]、[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. 名前を **Average Store Purchase ($)** に設定し、**[完了]** を選択します。

1. **Average Store Purchase ($)** の計算で、**[関数を選択する]** ドロップダウンから **[平均]** を選択します。

1. **[+ 属性の追加]** を選択し、**Purchases : PoS** を展開し、**[Total Price]** を選択して、**[追加]** を選択します。

1. **[実行]** ボタンを選択して、メジャーを完了します。

### タスク 4: Web 購入の平均値
次に、顧客ごとに行われたすべての Web 購入の平均値を定義します。

1. 必要に応じて、左側のナビゲーション メニューから **[メジャー]** を選択します。

1. ツール バーから **[+ 新規]、[独自のビルド]** を選択します。

1. **[無題のメジャー]** のヘッダー テキストの横にある **[詳細の編集]** を選択します。

1. 名前を **Average Web Purchase ($)** に設定し、**[完了]** を選択します。

1. **Average Web Purchase ($)** の計算で、**[関数を選択する]** ドロップダウンから **[平均]** を選択します。

1. **[+ 属性の追加]** を選択し、**Purchases: eCommerce** を展開し、**[Total Price]** を選択して **[追加]** を選択します。

1. **[実行]** ボタンを選択してメジャーを完了します。
